---
order: 1
title: "计算机网络基础"
---

### OSI七层模型

| 层级       | 功能                                                                                                                       |
| ---------- | -------------------------------------------------------------------------------------------------------------------------- |
| 物理层     | 主要实现相邻节点间比特流的透明传输，物理层定义了物理设备的标准，如网线的类型等， `网卡也会在这层工作` 。                   |
| 数据链路层 | 将网络层传下来的比特数据包组装成帧，并在相邻节点的链路上传送帧。数据链路层会将0、1序列划分为具有意义的数据帧传送给另一端。 |
| 网络层     | 选择合适的路由和交换结点，能让数据及时传送，此层的数据称为数据包，要关注的是IP协议。                                       |
| 传输层     | 向主机进程提供通用的数据传输服务。传输层需要关注的协议有TCP协议和UDP协议。                                                 |
| 会话层     | 负责在网络中的两节点之间建立、维持和终止通信，常见的协议有 ADSP、RPC 等。                                                  |
| 表示层     | 主要负责数据格式的转换，解决不同系统之间通信语法问题                                                                       |
| 应用层     | 为应用程序提供交互服务，目的是更方便应用从网络中接收的数据，重点关注HTTP协议                                               |

### TCP和IP模型
- TCP/IP 模型是由 OSI 模型演化而来，TCP/IP 模型将 OSI 模型由七层简化为五层（一开始为四层），应用层、表示层、会话层统一为应用层。

TCP/IP四层模型:
是由实际应用发展总结出来的，从实质上讲，TCP/IP只有最上面三层，最下面一层没有什么具体内容，TCP/IP参考模型没有真正描述这一层的实现。(网络接口层、网际层IP、运输层、应用层)

| 层级       | 作用                                                                                           |
| ---------- | ---------------------------------------------------------------------------------------------- |
| 应用层     | 主要有负责web浏览器的HTTP协议， 文件传输的FTP协议，负责电子邮件的SMTP协议，负责域名系统的DNS等 |
| 传输层     | 主要负责传输应用层的数据包                                                                     |
| 网络层     | 主要负责寻址                                                                                   |
| 数据链路层 | 主要是负责转换数字信号和物理二进制信号                                                         |


#### TCP/IP协议族

- TCP/IP只是利用 IP 进行通信时所必须用到的协议群的统称。
具体来说，在网络层是IP/ICMP协议、在传输层是TCP/UDP协议、在应用层是SMTP、FTP、以及 HTTP 等。他们都属于 TCP/IP 协议。

### 网络设备

#### 交换机

- 交换机是一种基于MAC地址识别，能完成封装转发数据包功能的网络设备。交换机可以"学习"MAC地址，并把其存放在内部地址表中，并根据 MAC 地址表进行数据转发。

#### 路由器

- 交换机需要记录的 MAC 地址表也越多，需要的交换机也越多，但是交换机的容量和性能有限，就有了路由器。
- 局域网内的网络连接可用交换机，如校园或公司。不同区域的局域网互联使用路由器。
- 路由器在网络层，路由器根据IP地址寻址，路由器可以处理TCP/IP协议，交换机不可以。交换机在中继层，交换机根据MAC地址寻址。

### HTTP

##### 请求方法
  HTTP1.0 的请求方法有： GET, POST 和 HEAD方法。

HTTP1.1 新增了六种请求方法：OPTIONS、PUT、PATCH、DELETE、TRACE 和 CONNECT 方法。

- GET:请求指定的页面信息，并返回实体主体。
- HEAD 类似于GET请求，只不过返回的响应中没有具体的内容，用于获取报头
- POST 向指定资源提交数据进行处理请求（例如提交表单或者上传文件)。数据被包含在请求体中。POST请求可能会导致新的资源的建立和/或已有资源的修改。
- PUT 从客户端向服务器传送的数据取代指定的文档的内容。
- DELETE 请求服务器删除指定的页面。
- CONNECT HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。
- OPTIONS 允许客户端查看服务器的性能。
- TRACE 回显服务器收到的请求，主要用于测试或诊断。
- PATCH 是对PUT方法的补充，用来对已知资源进行局部更新。

#### 状态码
 状态码由3位数字组成，第一位定义响应的类别
 
 | 数字 | 含义                                                                                          |
 | ---- | --------------------------------------------------------------------------------------------- |
 | 1XX  | 指示信息，表示请求以接收，继续处理                                                            |
 | 2XX  | 成功，表示请求已经被成功接收、理解、接受                                                      |
 | 3XX  | 状态码表示客户端请求的资源发送了变动，需要客户端用新的 URL 重新发送请求获取资源，也就是重定向 |
 | 4XX  | 状态码表示客户端发送的报文有误，服务器无法处理，也就是错误码的含义。                          |
 | 5XX  | 状态码表示客户端请求报文正确，但是服务器处理时内部发生了错误，属于服务器端的错误码            |

- 400 Bad Request :表示客户端请求的报文有错误。
- 401 Unauthorized :缺失或错误的认证，这个状态代码必须和WWW-Authenticate :报头域一起使用。
- 403 Forbidden :表示服务器禁止访问资源,并不是客户端的请求出错。
- 404 Not Found :表示请求的资源在服务器上不存在或未找到，所以无法提供给客户端。


- 501 Not lmplemented :表示客户端请求的功能还不支持。
- 502 Bad Gateway ：通常是服务器作为网关或代理时返回的错误码，表示服务器自身工作正常，访问后端服务器发生了错误。
- 503 Service Unavailable ；表示服务器当前很忙，暂时无法响应服务器。
- 504 Gateway Timeout ：网关超时，由作为代理或网关的服务器使用，表示不能及时地从远程服务器获得应答。


#### HTTPS

HTTP与HTTPS的区别：
1. HTTP 是明文传输协议，HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输、身份认证的网络协议，比 HTTP 协议安全
2. HTTPS比HTTP更加安全，对搜索引擎更友好，利于SEO，谷歌、百度优先索引HTTPS网页
3. HTTPS需要用到SSL证书，而HTTP不用
4. HTTPS标准端口443，HTTP标准端口80
5. HTTPS基于传输层，HTTP基于应用层
6. HTTPS在浏览器显示绿色安全锁，HTTP没有显示

#### 工作原理

HTTPS 协议会对传输的数据进行加密，而加密过程是使用了非对称加密实现

1. Client发起一个HTTPS的请求
2. Server把事先配置好的公钥证书返回给客户端。
3. Client验证公钥证书：比如是否在有效期内，证书的用途是不是匹配Client请求的站点，是不是在CRL吊销列表里面，它的上一级证书是否有效，这是一个递归的过程，直到验证到根证书（操作系统内置的Root证书或者Client内置的Root证书），如果验证通过则继续，不通过则显示警告信息。
4. Client使用伪随机数生成器生成加密所使用的对称密钥，然后用证书的公钥加密这个对称密钥，发给Server。
5. Server使用自己的私钥解密这个消息，得到对称密钥。至此，Client和Server双方都持有了相同的对称密钥。
6. Server使用对称密钥加密明文内容A，发送给Client。
7. Client使用对称密钥解密响应的密文，得到明文内容A。
8. Client再次发起HTTPS的请求，使用对称密钥加密请求的明文内容B，然后Server使用对称密钥解密密文，得到明文内容B。


#### 数字证书
- 客户端先向服务器端索要公钥，然后用公钥加密信息，服务器收到密文后，用自己的私钥解密。

#### 如何保证公钥不被篡改和信任度？
- 所以这里就需要借助第三方权威机构————数字证书认证机构，将服务器公钥放在数字证书（由数字证书认证机构颁发）中，只要证书是可信的，公钥就是可信的。

